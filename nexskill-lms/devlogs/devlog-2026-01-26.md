# Devlog - 2026-01-26

## Lesson Editor Refactor

Implemented a major refactor of the `LessonEditorPanel` component to improve UX and visual design.

### Changes

-   **Header Redesign**:

    -   Moved publish status toggle to the header.
    -   Added a clean title and subtitle area.
    -   Removed the old "Lesson Details" card header.

-   **Content Area Improvements**:

    -   Simplified the "Lesson Content" section structure.
    -   Flattened the hierarchy by removing nested cards.
    -   Implemented a cleaner, icon-based visual style for content blocks.
    -   Replaced individual "Add Block" buttons with a modern dropdown menu.
    -   Added hover effects for block controls (move/delete) to reduce visual clutter.

-   **Code Quality**:
    -   Refactored content block rendering logic.
    -   Added proper type definitions for block configuration.
    -   Cleaned up unused imports and styles.

## New Features

### Content Block Renderer

-   Introduced a new `ContentBlockRenderer` component for rendering lesson content blocks.
-   Supports multiple block types:
    -   **Text**: Sanitized and styled for readability.
    -   **Headings**: Dynamic heading levels with customizable styles.
    -   **Images**: Lazy-loaded with fallback handling.

### Lesson Preview

-   Added a `LessonPreview` component for previewing lessons.
-   Features:
    -   Sticky header with an "Exit Preview" button.
    -   Keyboard shortcuts for toggling preview mode (Cmd/Ctrl + Shift + P) and exiting (ESC).
    -   Clean layout for lesson metadata and content.

### Rich Text Editor Enhancements

-   Enhanced the `RichTextEditor` with:
    -   A custom `FontSizeExtension` for dynamic font sizing.
    -   Additional extensions like `Highlight` and `TextAlign` for improved text formatting.
    -   Streamlined toolbar with intuitive icons.

## Cloudinary Integration

### Overview

-   Integrated Cloudinary for media management, enabling seamless upload and retrieval of images and videos.

### Features

-   **Media Upload**: Added `MediaUploader` component for uploading media files directly to Cloudinary.
-   **Media Preview**: Introduced `MediaPreview` component for displaying uploaded media.
-   **Cloudinary Service**: Created `cloudinary.service.ts` to handle API interactions.
-   **Custom Hook**: Developed `useCloudinaryUpload` hook for managing Cloudinary uploads.

### Documentation

-   Added the following guides:
    -   **CLOUDINARY_IMPLEMENTATION_SUMMARY.md**: Summary of the Cloudinary implementation.
    -   **CLOUDINARY_INTEGRATION.md**: Detailed integration guide.
    -   **CLOUDINARY_QUICKSTART.md**: Quickstart guide for developers.

## Commit Summary

### New Files

-   **CLOUDINARY_IMPLEMENTATION_SUMMARY.md**: Added documentation for Cloudinary implementation.
-   **CLOUDINARY_INTEGRATION.md**: Added integration guide for Cloudinary.
-   **CLOUDINARY_QUICKSTART.md**: Added quickstart guide for Cloudinary.
-   **MediaPreview.tsx**: New component for media preview functionality.
-   **MediaUploader.tsx**: New component for uploading media.
-   **ContentBlockRenderer.tsx**: Added to `lesson-editor` for rendering content blocks.
-   **LessonEditorPanel.tsx**: Added to `lesson-editor` for managing lesson editing.
-   **LessonHeader.tsx**: Added to `lesson-editor` for lesson header management.
-   **useCloudinaryUpload.ts**: New hook for Cloudinary uploads.
-   **cloudinary.service.ts**: Service for handling Cloudinary API interactions.
-   **media.types.ts**: Type definitions for Cloudinary and media-related data.

### Moved Files

-   **CourseBuilderSidebar.tsx** → `course-builder` folder.
-   **CoursePreviewPane.tsx** → `course-builder` folder.
-   **CoursePricingForm.tsx** → `course-builder` folder.
-   **CoursePublishWorkflow.tsx** → `course-builder` folder.
-   **CourseSettingsForm.tsx** → `course-builder` folder.
-   **CourseTable.tsx** → `course-builder` folder.
-   **CurriculumEditor.tsx** → `course-builder` folder.
-   **DripSchedulePanel.tsx** → `course-builder` folder.
-   **LessonPreview.tsx** → `lesson-editor` folder.
-   **ResourceUploadPanel.tsx** → `lesson-editor` folder.
-   **RichTextEditor.tsx** → `lesson-editor` folder.
-   **VideoUploadPanel.tsx** → `lesson-editor` folder.
-   **LiveSessionManager.tsx** → `live-sessions` folder.
-   **QuizBuilderPanel.tsx** → `quiz-builder` folder.
